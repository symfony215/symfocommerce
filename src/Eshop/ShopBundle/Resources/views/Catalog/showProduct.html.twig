{% extends '@Shop/layout.html.twig' %}

{% block title %}
    {{ product.name }}
{% endblock title %}

{% block metadescription %}{{ product.metaDescription }}{% endblock %}
{% block metakeys %}{{ product.metaKeys }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/shop/fancybox/jquery.fancybox.css') }}" media="all" rel="stylesheet"
          type="text/css"/>
{% endblock stylesheets %}

{% block page_content -%}
    <div class="row">
        <div class="col-md-12">
            <ol class="breadcrumb">
                <li><a href="{{ path('index_main') }}">Home</a></li>
                <li><a href="{{ path('category', {'id' : product.category.id}) }}">{{ product.category.name }}</a></li>
                <li><a href="{{ path('manufacturer', {'id' : product.manufacturer.id}) }}">{{ product.manufacturer.name }}</a></li>
                <li class="active">{{ product.name }}</li>
            </ol>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5">
            <div class="thumbnail">
                {% if product.images | length %}
                    <a href="{{ asset(('uploads/gallery/' ~ product.images.first().path)) }}" class="fancybox" rel="group">
                        <img class="group list-group-image"
                             src="{{ asset( ('uploads/gallery/' ~ product.images.first().path) | imagine_filter('product_main_thumb')) }}"
                             alt="{{ product.name }}"/>
                    </a>
                {% else %}
                    <img class="group list-group-image"
                         src="{{ asset( ('uploads/gallery/no_image_available.png') | imagine_filter('product_main_thumb')) }}"
                         alt="{{ product.name }}"/>
                {% endif %}
            </div>
        </div>
        <div class="col-md-7">
            <div class="caption">
                <h1 class="group inner list-group-item-heading">{{ product.name }}</h1>
                <p class="lead price"><span>{{ product.price }}</span> ั.ะต.</p>
                <div class="row addtocart" data-id="{{ product.id }}">
                    <div class="col-md-2">
                        <input type="number" class="form-control addtocart-input" value="1">
                    </div>
                    <div class="col-md-2">
                        <p>
                            <a class="btn btn-success addtocart-btn" href="#">Add to cart</a>
                        </p>
                    </div>
                </div>
                <div class="row">
                    {% if product.images | length %}
                        {% for image in product.images|slice(1) %}
                            <div class="col-xs-6 col-md-3">
                                <a href="{{ asset(('uploads/gallery/' ~ image.path)) }}" class="thumbnail fancybox" rel="group">
                                    <img class="group list-group-image"
                                         src="{{ asset( ('uploads/gallery/' ~ image.path) | imagine_filter('product_preview_thumb')) }}"
                                         alt="{{ product.name }}"/>
                                </a>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="row well well-lg">
        <h3 class="group inner list-group-item-heading">{{ product.name }}</h3>
        <div class="caption">
            <p class="group inner list-group-item-text">
                {{ product.description }}
            </p>
        </div>
    </div>
{% endblock page_content %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/shop/js/js.cookie.js') }}"></script>
    <script src="{{ asset('bundles/shop/fancybox/jquery.mousewheel-3.0.6.pack.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/shop/fancybox/jquery.fancybox.pack.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/shop/js/cart.js') }}" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            $('.fancybox').fancybox();
        });
    </script>
{% endblock javascripts %}